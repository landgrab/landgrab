<% admin ||= false %>
<% model_param = admin ? [:admin, redemption_invite] : redemption_invite %>
<%= form_with(model: model_param, local: true) do |form| %>
  <%= render 'layouts/form_errors', errors: redemption_invite.errors %>

  <div class="row mb-3 g-3 align-items-center">
    <div class="col-sm-2">
      <%= form.label :recipient_name, class: 'col-form-label' %>
    </div>
    <div class="col-sm-3">
      <%= form.text_field :recipient_name, required: true, class: 'form-control', aria: { describedby: 'recipientNameHelp' } %>
    </div>
    <div class="col-sm-7">
      <span id="recipientNameHelp" class="form-text">
        Enter the name of the gift recipient.
      </span>
    </div>
  </div>

  <div class="row mb-3 g-3 align-items-center">
    <div class="col-sm-2">
      <%= form.label :recipient_email, class: 'col-form-label' %>
    </div>
    <div class="col-sm-3">
      <%= form.email_field :recipient_email, class: 'form-control', aria: { describedby: 'recipientEmailHelp' } %>
    </div>
    <div class="col-sm-7">
      <span id="recipientEmailHelp" class="form-text">
        <% if form.object.recipient_email.present? %>
          The invite has already been sent; changing it will invalidate the previous link and send a new email.
        <% else %>
          Enter the email of the gift recipient; we'll send the gift invitation here.
        <% end %>
      </span>
    </div>
  </div>

  <%= form.hidden_field :subscription_id, { value: form.object.subscription.hashid } %>

  <%= form.submit form.object.persisted? ? 'Update / Resend Invitation' : 'Create / Send Invitation', class: 'btn btn-primary' %>
<% end %>
